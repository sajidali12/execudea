import{r as a,a as g,j as e}from"./app-c662df72.js";import{A as u}from"./AdminLayout-cb2e9080.js";import"./ApplicationLogo-77d3fccf.js";import"./AntdIcon-183f7b5d.js";function v({auth:b}){const[d,h]=a.useState([]),[i,o]=a.useState(!0),[x,c]=a.useState(null),[s,n]=a.useState(1),[l,y]=a.useState(1);a.useEffect(()=>{m(s)},[s]);const m=r=>{o(!0),g.get(`/admin/messages?page=${r}`).then(t=>{h(t.data.data),y(t.data.last_page),o(!1)}).catch(t=>{console.error("Error fetching messages:",t),c("Failed to fetch messages."),o(!1)})},p=r=>{g.delete(`/admin/messages/${r}`).then(t=>{console.log(t.data.message),m(s)}).catch(t=>{console.error("Error deleting message:",t),c("Failed to delete message.")})};return e.jsx(u,{user:b.user,children:e.jsxs("div",{className:"container mx-auto py-8 px-4 mt-0",children:[e.jsxs("section",{className:"mt-0",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-700 text-center text-size-2xl",children:"Messages"}),i&&e.jsx("p",{className:"text-gray-500",children:"Loading..."}),x&&e.jsx("p",{className:"text-red-500 mb-4",children:x}),d.length===0&&!i&&!x&&e.jsx("p",{className:"text-gray-500",children:"No messages found."}),d.length>0&&e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"bg-white shadow-md rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-300",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-300",children:"Name"}),e.jsx("th",{className:"py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-300",children:"Subject"}),e.jsx("th",{className:"py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-300",children:"Email"}),e.jsx("th",{className:"py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-300",children:"Message"}),e.jsx("th",{className:"py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-300",children:"Received At"}),e.jsx("th",{className:"py-3 px-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-300",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white",children:d.map(r=>e.jsxs("tr",{children:[e.jsx("td",{className:"py-4 px-6 text-sm font-medium text-gray-900 border-b border-gray-300 border-r border-gray-300",children:r.name}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-500 border-b border-gray-300 border-r border-gray-300",children:r.subject}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-500 border-b border-gray-300 border-r border-gray-300",children:r.email}),e.jsx("td",{className:"py-4 px-6 border-b border-gray-300 border-r border-gray-300",children:e.jsx("div",{className:"max-h-24 overflow-y-auto text-sm text-gray-500",children:r.message})}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-500 border-b border-gray-300 border-r border-gray-300",children:new Date(r.created_at).toLocaleString()}),e.jsx("td",{className:"py-4 px-6 text-sm text-gray-500 border-b border-gray-300",children:e.jsx("button",{onClick:()=>p(r.id),className:"mx-1 px-4 py-2 ml-6  text-sm text-white bg-red-500 rounded",children:"Delete"})})]},r.id))})]})})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-6",children:[e.jsxs("button",{onClick:()=>n(r=>Math.max(r-1,1)),disabled:s===1,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx("i",{className:"fas fa-chevron-left mr-2"})," Previous"]}),e.jsxs("span",{className:"text-sm text-gray-700",children:["Page ",s," of ",l]}),e.jsxs("button",{onClick:()=>n(r=>Math.min(r+1,l)),disabled:s===l,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:["Next ",e.jsx("i",{className:"fas fa-chevron-right ml-2"})]})]})]})})}export{v as default};
